<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
	<link rel="stylesheet" href="index.css">
	<title>jsPDF</title>
</head>
<body>
	<div class="canvas" id="canvas">
		<div class="guia">
			<p class="guiaMadre"></p>
			<p class="piezas"></p>
			<p class="de"></p>
			<p class="origen"></p>
			<p class="destino"></p>
		</div>
	</div>

	<form>
		<label for="">Guia madre</label><br>
		<input type="text" id="guiaMadre"><br>
		<label for="">Piezas</label><br>
		<input type="number" id="piezas" value="2"><br>
		<label for="">De</label><br>
		<input type="number" id="de"><br>
		<label>Origen</label><br>
		<input type="text" id="origen"><br>
		<label >Destino</label><br>
		<input type="text" id="destino"><br><br>

		<button type="button" class="print">Imprimir</button>
	</form>

	<script>
		let contador;
		let print = $('.print');
		let datos = [$('#guiaMadre'), $('#piezas'), $('#de'), $('#origen'), $('#destino')]
		let etiquetas = [$('.guiaMadre'), $('.piezas'), $('.de'), $('.origen'), $('.destino')]

		print.click(()=>{
			imprSelec('canvas')
		})

		//Change data when writing
		datos[0].keyup(()=>{
			etiquetas[0].text(datos[0].val());
		})
		datos[1].keyup(()=>{
			etiquetas[1].text(datos[1].val());

		})
		datos[1].change(()=>{
			console.log("A");
		})
		datos[2].keyup(()=>{
			etiquetas[2].text(datos[2].val());
		})
		datos[3].keyup(()=>{
			etiquetas[3].text(datos[3].val());
		})
		datos[4].keyup(()=>{
			etiquetas[4].text(datos[4].val());
		})

		function imprSelec(nombre) {
			var ficha = document.getElementById(nombre)
			var ventana = window.open(' ', 'popimpr');
			ventana.document.write('<html><head><title>' + document.title + '</title>');
			ventana.document.write('<link rel="stylesheet" href="index.css">'); //Aquí agregué la hoja de estilos
			ventana.document.write('</head><body >');
			ventana.document.write(ficha.innerHTML);
			ventana.document.write('</body></html>');
			ventana.document.close();
			setTimeout(()=>{
				ventana.print( );
				ventana.close();
			}, 100)
		}
	</script>
</body>
</html>